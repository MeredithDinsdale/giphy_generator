<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <title>Giphy Generator</title>
</head>
<body>
<div class="container">
    <div class="row">
        <h1 id="title">
            Gif Generator!
        </h1>
    </div>

    <div class="row">
        <h5 id="instructions">
            Click a button to see some fun gifs in action. To pause the gif, click on it. To re-animate the gif, click it again!
        </h5>
    </div>

    <form id="topic-form">
        <label for="topic-input">Add another Topic!</label>
        <input type="text" id="topic-input">
        <input id="add-topic" type="submit" value="Add">
      </form>

    <div class="row" id="buttons">
       
    </div>

    <div class="row" id="gifs">
        <!-- GIFS GO HERE -->
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">

//=============================Rendering Existing Buttons================================
let topicsArray = ["salamanders", "otters", "jellyfish"];
let topic;
let button;

for (i=0; i < topicsArray.length; i++) {
    button = $("<button>").text(topicsArray[i]).attr("data-topic", topicsArray[i]).addClass("clickMe");
    $("#buttons").append(button);
}
//=============================Adding New User Input Buttons==============================
$("#add-topic").on("click", function(event) {
    event.preventDefault();
    // $("#topic-input").empty();
    newTopic = $("#topic-input").val().trim();
    button = $('<button>').text(newTopic).attr("data-topic", newTopic).addClass("clickMe");
    $('#buttons').append(button);
});
 
//==========================Clicking Existing Buttons====================================
$(".clickMe").on("click", function(){
    $("#gifs").empty();
    topic = $(this).attr("data-topic");
    let queryURL = "https://api.giphy.com/v1/gifs/search?q=" + topic + "&api_key=Ge1SfcGlTb9DupOUNff1xwPdFKPyMZhk&limit=10";
    $.ajax({
      url: queryURL,
      method: "GET"
    })
    .then(function(response) {
        let results = response.data;
        for (i = 0; i < results.length; i++)  {
            let gifDiv = $("<div>");
            let rating = results[i].rating;
            let ratingText = $("<p>").text("Rating: " + rating);
            let gifImage = $("<img>");

            gifImage.attr("src", results[i].images.fixed_height.url);
            gifDiv.append(ratingText);
            gifDiv.prepend(gifImage);
            $('#gifs').append(gifDiv);
        }
    });
});



</script>
</body>
</html>